
<ngx-graph
  [maxZoomLevel] = "1000"
  [view]="[500, 500]"
  layout="dagreCluster"
  [links]="l"
  [update$]="update$"
  [nodes]="n"
  [showMiniMap]="true"
  [miniMapMaxHeight]="200"
  [zoomToFit$]="zoomToFit$"
  [miniMapPosition]="pos"
>
<!--
https://htmlcolorcodes.com/color-picker/
analagous colors
yellow: #FFB633
orange: #FF5033
blue: #5033FF
-->
<ng-template #defsTemplate>
  <svg:marker id="arrow" viewBox="0 -5 10 10" refX="8" refY="0" markerWidth="4" markerHeight="4" orient="auto">
    <svg:path d="M0,-5L10,0L0,5" class="arrow-head" />
  </svg:marker>
</ng-template>
<ng-template #nodeTemplate let-node>
  <svg width= "200" height = "200" viewBox="0 0 200 200">
    <g *ngFor="let row of hm.get(node.id).board; let i = index">
      <ng-container *ngFor="let col of row; let j = index">
        <rect  width="50" height="50" [attr.x]="j * 50" [attr.y]="i * 50" [attr.fill]="hm.get(node.id).color"></rect>
        <text  [attr.x]="j * 50 + 25" [attr.y]="i * 50 + 25" font-family="Verdana" font-size="25" fill="white"  dominant-baseline="middle"
        text-anchor="middle">{{col}}</text>
      </ng-container>
    </g>
  </svg>
  </ng-template>
  <ng-template #linkTemplate let-link>
    <svg:g class="edge">
      <svg:path  class="line" stroke-width="2" marker-end="url(#arrow)">
      </svg:path>
      <svg:text class="edge-label" text-anchor="middle">
        <textPath style="font-size:20" class="text-path" [attr.href]="'#' + link.id" [style.dominant-baseline]="link.dominantBaseline" startOffset="50%">
          {{link.label}}
        </textPath>
      </svg:text>
    </svg:g>
  </ng-template>
</ngx-graph>
